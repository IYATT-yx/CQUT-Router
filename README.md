# 重庆理工大学宽带使用路由器方案


2022.8.31
新宽带系统（锐捷）使用路由器方案可参考：https://blog.iyatt.com/?p=6815

———————————————————————————————————————————————————  
↓↓↓↓↓↓↓原电信创翼宽带系统将于2022年9月末弃用↓↓↓↓↓↓↓
———————————————————————————————————————————————————  

<s>
路由器固件  
解除重庆理工大学宽带一人一号限制

技术原理：  
[创翼](http://cq.189.cn/college/home/resource.htm)当前采用的拨号协议是 PPPoE，普通的路由器也是支持这个拨号协议的，但是创翼实际拨号中不是单纯的拨号。在客户端中输入的宽带帐号 手机号@cqit 并不是真正的的 PPPoE 帐号，创翼会结合拨号时间生成一个前缀加到你的宽带帐号前面，并且这个前缀是以换行符开头的，手动是无法输入这个符号的，只能写程序去拨号，这个也是普通路由器无法使用学校宽带的原因。  
这里路由器固件中采用的方案来源于[miao1007
/
Openwrt-NetKeeper](https://github.com/miao1007/Openwrt-NetKeeper)，在路由器上运行一个 PPPoE 服务器，当电脑连接到路由器后，并使用创翼进行登录，在开启 PPPoE 服务器的 debug 模式后，收到拨号请求会将拨号者的帐号和密码保存到日志文件中，即可获得真实的帐号。然后路由器读取帐号并使用 PPPoE 客户端向学校的宽带服务器拨号建立连接，手机和电脑等设备即可连接路由器进行上网。  
因为动态帐号的原因，如果宽带断线（路由器断电，宽带服务故障等），重新连接还是需要借助电脑创翼拨号来获取新的帐号。当然校园网使用路由器也不止这一种方案，还可能有破解创翼客户端获取帐号前缀生成算法的，直接在路由器上也能进行登录，不需要去拦截帐号。但是呢，这种方案伴随着创翼更新可能会修改前缀生成算法，然后又要去破解创翼，然后为路由器写新的程序，这样时间开销和难度都很大。不如拦截法，管你怎么改生成算法，我直接拦截你的帐号，用路由器代替你去拨号。至少我了解到的，这个方案从2017年开始至今都还能使用。  

路由器支持：  
* Phicomm K2 (g1)
* Newifi3 d2 (g2)

路由器管理地址： `192.168.6.1`  
WiFi名和密码都是： `iyatt.com`


# 更新日志
## 2021-4-9
使用 [OpenWrt 源码](https://github.com/openwrt/openwrt) 版本： 21.098
  
## 2021-4-10
2.14g1 2.15g2 去除adblock

## 2021-4-11
2.16g2 去除cshark

## 2021-4-11
2.15g1 2.17g2 添加TCP-BBR

## 2021-4-11
2.16g1 2.18g2 修改拨号脚本部署命令

## 2021-5-8  
使用 [OpenWrt 源码](https://github.com/openwrt/openwrt) 版本： 21.127  
部分APP来源：   

## 2021-5-15
2.20g1 和 2.20g2 都有的主要更改在优化设置和拨号脚本以及添加 Turbo ACC 网络加速  
部分新增应用来源：[openwrt-packages](https://github.com/caonimagfw/openwrt-packages)  

另外 2.20g2  
增加 [aliddns](https://github.com/honwen/luci-app-aliddns)，学校宽带有公网 IP，如果自己有域名的话，可以使用阿里云动态解析。注意宽带的80,443等端口是无法使用的。  

USB 储存设备支持（文件系统：ext4、vfat、exFat、ntfs），在 `系统->挂载点` 中勾选 `自动挂载未配置的磁盘分区` ，插入 USB 储存设备会自动挂载到 /mnt 下。   

ftp 服务器支持  
</s>
  
----------------------------------------------------------------------------  
关键词：重庆理工大学，路由器，宽带，创翼，锐捷，CQUT，重庆理工大学锐捷，重庆理工大学创翼，CQUTruijie，CQUTchuangyi
